# Java 代码审查 Skill

检测 Java 代码质量并提出优化意见。

## 使用方式

```
/review-java <文件路径或代码片段>
```

## 审查流程

### 第一步：读取代码

1. 如果用户提供了文件路径，使用 `Read` 工具读取文件内容
2. 如果用户直接提供代码片段，直接使用该代码

### 第二步：代码分析

使用 `lsp_diagnostics` 工具检查 Java 文件的编译错误和警告。

### 第三步：审查维度

对代码进行以下维度的审查：

#### 1. 编译正确性
- 语法错误
- 类型错误
- 导入缺失

#### 2. 代码规范
- 命名规范（类名大驼峰、变量名小驼峰、常量全大写下划线分隔）
- 缩进和格式
- 代码注释

#### 3. 最佳实践
- 避免魔法数字，使用常量
- 避免过长的方法（建议不超过50行）
- 避免过深的嵌套（建议不超过3层）
- 使用 StringBuilder 而非字符串拼接（循环中）
- 正确使用访问修饰符

#### 4. 潜在问题
- 空指针风险
- 资源泄漏（未关闭的流、连接等）
- 并发安全问题
- 数组越界风险

#### 5. 性能优化
- 不必要的对象创建
- 低效的集合操作
- 可优化的算法复杂度

#### 6. Java 特性使用
- 是否可以使用更现代的 Java 特性（如 Lambda、Stream、Optional）
- 是否正确使用了泛型

### 第四步：输出格式

请按以下格式输出审查结果：

```markdown
## 📊 代码审查报告

### ✅ 优点
- [列出代码的优点]

### 复杂度
- 列出时间复杂度
- 列出空间复杂度

### ⚠️ 问题
| 级别 | 问题描述 | 位置 | 建议修改 |
|------|---------|------|---------|
| 🔴 严重 | ... | 第X行 | ... |
| 🟡 警告 | ... | 第X行 | ... |
| 🔵 建议 | ... | 第X行 | ... |

### 💡 优化建议
1. **建议标题**
   - 当前代码：`...`
   - 建议修改：`...`
   - 原因：...

### 📈 评分
- 代码规范：X/10
- 可读性：X/10
- 健壮性：X/10
- 性能：X/10
- **总分：X/10**

### 🛠️ 优化后完整代码
```java
// 在此给出完整的优化后代码示例
// 包含所有上述建议的修改
```
```

### 第五步：输出优化后完整代码

**必须**在审查报告最后给出完整的优化后代码：

1. 整合所有优化建议，给出一份可直接运行的完整代码
2. 代码中添加适当注释，解释关键改动
3. 保持原有功能不变，仅做质量优化
4. 使用合理的 Java 版本特性（默认 Java 8+）

## 注意事项

- 针对学习者，解释要通俗易懂
- 区分"必须修复"和"建议优化"
- 对于初学者代码，重点关注基础规范和常见错误
- 提供具体的修改示例，而非抽象的建议
